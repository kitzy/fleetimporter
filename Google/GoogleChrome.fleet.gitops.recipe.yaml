Description: "Builds Google Chrome.pkg using the upstream recipe, then uploads to S3 and creates GitOps PR."
Identifier: com.github.kitzy.fleet.gitops.GoogleChrome
Input:
  NAME: Google Chrome
  GITOPS_SOFTWARE_DIR: lib/macos/software
  GITOPS_TEAM_YAML_PATH: teams/workstations.yml
MinimumVersion: "2.0"
ParentRecipe: com.github.autopkg.pkg.googlechrome
Process:
- Arguments:
    pkg_path: "%pkg_path%"
    software_title: "%NAME%"
    version: "%version%"
    gitops_mode: true
    aws_s3_bucket: "%AWS_S3_BUCKET%"
    aws_cloudfront_domain: "%AWS_CLOUDFRONT_DOMAIN%"
    gitops_repo_url: "%GITOPS_REPO_URL%"
    gitops_software_dir: "%GITOPS_SOFTWARE_DIR%"
    gitops_team_yaml_path: "%GITOPS_TEAM_YAML_PATH%"
    github_token: "%GITHUB_TOKEN%"
    s3_retention_versions: 3
    self_service: true
    categories:
      - Browsers
  Processor: com.github.kitzy.FleetImporter/FleetImporter

